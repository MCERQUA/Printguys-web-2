# TASK T024: Performance Audit & Fixes

## OBJECTIVE
Run performance audit and fix identified issues.

## PROJECT LOCATION
/home/nick/Nick/Printguys-AI/printguys-nextjs

## INSTRUCTIONS

1. Build the production version:
```bash
cd /home/nick/Nick/Printguys-AI/printguys-nextjs
npm run build
```

2. Check bundle sizes:
```bash
npm run build 2>&1 | grep -A 50 "Route (app)"
```

3. Identify large dependencies:
```bash
npx @next/bundle-analyzer
# Or use: npx source-map-explorer .next/static/chunks/*.js
```

4. Common performance fixes:

a) Dynamic imports for heavy components:
```typescript
import dynamic from 'next/dynamic'

const DesignStudio = dynamic(() => import('@/components/design-studio'), {
  loading: () => <div>Loading design studio...</div>,
  ssr: false, // If not needed on server
})
```

b) Optimize fonts in layout.tsx:
```typescript
import { Inter } from 'next/font/google'

const inter = Inter({
  subsets: ['latin'],
  display: 'swap',
  preload: true,
})
```

c) Add loading.tsx for routes:
```typescript
// /src/app/loading.tsx
export default function Loading() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="animate-spin h-8 w-8 border-4 border-emerald-500 border-t-transparent rounded-full" />
    </div>
  )
}
```

d) Implement route prefetching:
```typescript
import Link from 'next/link'

// Links automatically prefetch on hover
<Link href="/services" prefetch={true}>Services</Link>
```

e) Add React Suspense boundaries:
```typescript
import { Suspense } from 'react'

<Suspense fallback={<LoadingSkeleton />}>
  <HeavyComponent />
</Suspense>
```

f) Optimize third-party scripts:
```typescript
import Script from 'next/script'

<Script
  src="https://example.com/script.js"
  strategy="lazyOnload"
/>
```

5. Check Core Web Vitals targets:
- LCP (Largest Contentful Paint): < 2.5s
- FID (First Input Delay): < 100ms
- CLS (Cumulative Layout Shift): < 0.1

6. Add performance headers in next.config.ts:
```typescript
const nextConfig = {
  async headers() {
    return [
      {
        source: '/:all*(svg|jpg|png|webp)',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable',
          },
        ],
      },
    ]
  },
}
```

## OUTPUT
- Write results to: /home/nick/Nick/Printguys-AI/printguys-nextjs/z-code-outputs/agent8-T024.md
- Include build output
- List optimizations made
- End with "TASK_COMPLETED" if successful
