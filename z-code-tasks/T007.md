# TASK T007: Make Designs Persist to Database

## OBJECTIVE
Ensure user designs are saved to PostgreSQL database instead of memory.

## PROJECT LOCATION
/home/nick/Nick/Printguys-AI/printguys-nextjs

## CONTEXT
- Database should be connected (T001, T002 completed)
- Designs API should be updated (T003 completed)
- This task verifies and tests design persistence

## INSTRUCTIONS

1. Verify the Design model exists in schema:
```bash
cat /home/nick/Nick/Printguys-AI/printguys-nextjs/prisma/schema.prisma | grep -A 30 "model Design"
```

2. Check the designs API route:
```bash
cat /home/nick/Nick/Printguys-AI/printguys-nextjs/src/app/api/designs/route.ts
```

3. If not using Prisma, update to use Prisma (see T003)

4. Verify design studio saves correctly:
- Open http://localhost:3000/design-studio
- Create a design
- Click Save
- Refresh page
- Verify design loads

5. Check database for saved designs:
```bash
cd /home/nick/Nick/Printguys-AI/printguys-nextjs
PGPASSWORD=printguys_secure_2026 psql -U printguys -d printguys -h localhost -c "SELECT id, name, \"productType\", \"createdAt\" FROM designs LIMIT 10;"
```

6. Test design operations:
- Create design
- Update design
- Delete design
- List designs

## OUTPUT
- Write results to: /home/nick/Nick/Printguys-AI/printguys-nextjs/z-code-outputs/agent3-T007.md
- Include test results
- Confirm data persists after server restart
- End with "TASK_COMPLETED" if successful or "TASK_FAILED: [reason]" if not

## CONSTRAINTS
- Don't delete user designs
- Maintain design studio functionality
- Test all CRUD operations
