# TASK T001: Connect PostgreSQL Database

## OBJECTIVE
Set up and connect PostgreSQL database for the Printguys Next.js application.

## PROJECT LOCATION
/home/nick/Nick/Printguys-AI/printguys-nextjs

## CONTEXT
- The project uses Prisma 7.3.0 as ORM
- Schema exists at /prisma/schema.prisma
- Current prisma.ts returns null (placeholder)
- Need to use a PostgreSQL database

## INSTRUCTIONS

1. First, check if PostgreSQL is running:
```bash
sudo systemctl status postgresql
```

2. Create the database and user:
```bash
sudo -u postgres psql -c "CREATE DATABASE printguys;"
sudo -u postgres psql -c "CREATE USER printguys WITH ENCRYPTED PASSWORD 'printguys_secure_2026';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE printguys TO printguys;"
sudo -u postgres psql -c "ALTER DATABASE printguys OWNER TO printguys;"
```

3. Update the .env.local file with DATABASE_URL:
```
DATABASE_URL="postgresql://printguys:printguys_secure_2026@localhost:5432/printguys"
```

4. Update /src/lib/prisma.ts to properly initialize Prisma client:
```typescript
import { PrismaClient } from '@prisma/client'

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const prisma = globalForPrisma.prisma ?? new PrismaClient()

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma

export default prisma
```

5. Test the connection by running:
```bash
cd /home/nick/Nick/Printguys-AI/printguys-nextjs
npx prisma db push
```

## OUTPUT
- Write results to: /home/nick/Nick/Printguys-AI/printguys-nextjs/z-code-outputs/agent1-T001.md
- Include any errors encountered
- End with "TASK_COMPLETED" if successful or "TASK_FAILED: [reason]" if not

## CONSTRAINTS
- Never delete existing files
- Create backups before modifying
- Use existing schema, don't modify it
